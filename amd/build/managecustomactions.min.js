define(["jquery","core/ajax","core/str","core/log"],(function($,ajax,str,log){const SELECTOR_CA_SELECTBOX=".local_trigger_ca_selectbox select",SELECTOR_CA_DESCRIPTION="#fitem_id_description input",SELECTOR_CA_PROTOCOL="#fitem_id_protocol  input",EVENT_CHANGE="change";const get_fieldname=function(index){return $("#fitem_id_customtext"+index+" input")},get_fieldhelp=function(index){return $("#fitem_id_customhelp"+index+" input")},initListeners=function(){$(SELECTOR_CA_SELECTBOX).on(EVENT_CHANGE,(function(e){log.debug("changed"),log.debug($(this).val()),function(that){$(SELECTOR_CA_DESCRIPTION).val(""),$(SELECTOR_CA_PROTOCOL).val("");for(var i=1;i<=10;i++)get_fieldname(i).val(""),get_fieldhelp(i).val("")}(),ajax.call([{methodname:"local_trigger_fetch_function_details",args:{functionname:$(this).val()}}])[0].done((function(data){var fdata=JSON.parse(data);$(SELECTOR_CA_DESCRIPTION).val(fdata.description);var index=0;for(var thefieldname in fdata.parameters_desc.keys){if((thefield=fdata.parameters_desc.keys[thefieldname]).required){index++,get_fieldname(index).val(thefieldname);var thelabel="("+thefield.type+") "+thefield.desc+" (required)";get_fieldhelp(index).val(thelabel)}}for(var thefieldname in fdata.parameters_desc.keys){var thefield;if(!(thefield=fdata.parameters_desc.keys[thefieldname]).required){index++,get_fieldname(index).val(thefieldname);thelabel="("+thefield.type+") "+thefield.desc+" (optional)";get_fieldhelp(index).val(thelabel)}}log.debug(data)}))}))};return{init:function(){var callback;str.get_strings([{key:"webhooks_explanation",component:"local_trigger"},{key:"customactions_explanation",component:"local_trigger"}]).done((function(strings){log.debug(strings),strings,"function"==typeof callback&&callback()})),initListeners()}}}));

//# sourceMappingURL=managecustomactions.min.js.map